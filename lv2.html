<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://revenant-three.vercel.app/img/7427.png" type="image/png">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belajar Coding - Pemprograman Prosedural</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-header {
            text-align: center;
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #4ecdc4;
        }

        .game-header h1 {
            font-size: 2.5em;
            color: #4ecdc4;
            text-shadow: 0 0 10px #4ecdc4;
            margin-bottom: 10px;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            gap: 15px;
        }

        .stat {
            background: rgba(78, 205, 196, 0.2);
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #4ecdc4;
            text-align: center;
            flex: 1;
        }

        .stat-label {
            font-size: 0.9em;
            color: #4ecdc4;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #fff;
        }

        .game-screen {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            border: 2px solid #4ecdc4;
            min-height: 400px;
        }

        .quest-title {
            font-size: 2em;
            color: #ff6b6b;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 10px #ff6b6b;
        }

        .quest-description {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            line-height: 1.6;
            border-left: 4px solid #4ecdc4;
        }

        .character-sprite {
            text-align: center;
            font-size: 4em;
            margin: 20px 0;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .code-editor {
            background: #1a1a1a;
            border: 2px solid #4ecdc4;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }

        .code-editor textarea {
            width: 100%;
            min-height: 150px;
            background: #0a0a0a;
            color: #4ecdc4;
            border: none;
            font-family: 'Courier New', monospace;
            font-size: 1em;
            padding: 15px;
            border-radius: 5px;
            resize: vertical;
        }

        .code-editor textarea:focus {
            outline: 2px solid #4ecdc4;
        }

        .hint-box {
            background: rgba(255, 107, 107, 0.2);
            border: 2px solid #ff6b6b;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .hint-title {
            color: #ff6b6b;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .solution-box {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            display: none;
        }

        .solution-code {
            background: #0a0a0a;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            color: #4ecdc4;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            pointer-events: none;
            white-space: pre-wrap;
        }

        .solution-warning {
            color: #ffc107;
            font-size: 0.9em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .button {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            color: #fff;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            transition: all 0.3s;
            margin: 5px;
        }

        .button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px #4ecdc4;
        }

        .button:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
        }

        .button-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
        }

        .button-danger:hover {
            box-shadow: 0 0 20px #ff6b6b;
        }

        .output-console {
            background: #0a0a0a;
            border: 2px solid #4ecdc4;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }

        .output-line {
            margin: 5px 0;
            padding: 5px;
        }

        .output-success {
            color: #4ecdc4;
        }

        .output-error {
            color: #ff6b6b;
        }

        .code-collection {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .code-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #4ecdc4;
        }

        .progress-bar {
            background: rgba(0, 0, 0, 0.3);
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
            border: 2px solid #4ecdc4;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4 0%, #44a08d 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .victory-screen {
            text-align: center;
            padding: 40px;
        }

        .victory-screen h2 {
            font-size: 3em;
            color: #4ecdc4;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: #16213e;
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #4ecdc4;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="game-header">
            <h1>üéÆ CODING QUEST üéÆ</h1>
            <p>Belajar Petualangan - Paradigma Berorientasi Instruksi (Prosedural)</p>
            
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-label">Quest</div>
                    <div class="stat-value" id="currentQuest">1/5</div>
                </div>
                <div class="stat">
                    <div class="stat-label">XP</div>
                    <div class="stat-value" id="xpValue">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="levelValue">1</div>
                </div>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%;">0%</div>
            </div>
        </div>

        <div class="game-screen" id="gameScreen">
            <!-- Game content akan dimuat di sini -->
        </div>

        <div class="modal" id="summaryModal">
            <div class="modal-content">
                <h2 style="color: #4ecdc4; text-align: center;">üìú Koleksi Kode Anda üìú</h2>
                <div id="codeCollection"></div>
                <button class="button" onclick="closeSummary()">Tutup</button>
            </div>
        </div>
    </div>

    <script>
        const gameState = {
            currentQuest: 0,
            xp: 0,
            level: 1,
            codes: [],
            playerName: '',
            questData: [
                {
                    title: "Quest 1: Perintah Berurutan - Melarikan Diri dari Penjara",
                    description: "Kamu terjebak di penjara yang dijaga oleh ogre! Untuk melarikan diri, kamu harus memberikan perintah berurutan kepada karaktermu.",
                    enemy: "üëπ",
                    concept: "Sequential Commands",
                    hint: "Gunakan perintah moveRight(), moveUp(), collectKey(), openDoor()",
                    expectedCode: ["moveRight", "moveUp", "collectKey", "openDoor"],
                    challenge: "Tuliskan 4 perintah berurutan untuk:\n1. Bergerak ke kanan\n2. Bergerak ke atas\n3. Mengambil kunci\n4. Membuka pintu",
                    solution: "namaMu.moveRight()\nnamaMu.moveUp()\nnamaMu.collectKey()\nnamaMu.openDoor()"
                },
                {
                    title: "Quest 2: Pengulangan (Loop) - Melewati Jembatan Berbahaya",
                    description: "Ada jembatan panjang dengan 5 papan yang harus kamu lewati. Daripada menulis perintah bergerak 5 kali, gunakan loop!",
                    enemy: "üêâ",
                    concept: "Loops (for/while)",
                    hint: "Gunakan for loop atau while loop untuk mengulangi hero.moveForward()",
                    expectedCode: ["for", "moveForward"],
                    challenge: "Gunakan loop untuk membuat hero bergerak maju 5 kali",
                    solution: "for (let i = 0; i < 5; i++) {\n    namaMu.moveForward()\n}"
                },
                {
                    title: "Quest 3: Percabangan (If-Else) - Memilih Jalur yang Aman",
                    description: "Kamu menemukan dua jalur! Jalur kiri ada jebakan, jalur kanan aman. Gunakan percabangan untuk memeriksa kondisi.",
                    enemy: "üíÄ",
                    concept: "Conditional Statements",
                    hint: "Gunakan if-else untuk memeriksa hero.isTrapAhead(), lalu pilih moveRight() atau moveLeft()",
                    expectedCode: ["if", "isTrapAhead", "else", "moveRight"],
                    challenge: "Buat kondisi: jika ada jebakan di depan, bergerak ke kanan, jika tidak bergerak ke kiri",
                    solution: "if (namaMu.isTrapAhead()) {\n    namaMu.moveRight()\n} else {\n    namaMu.moveLeft()\n}"
                },
                {
                    title: "Quest 4: Fungsi (Function) - Membuat Mantra Ajaib",
                    description: "Kamu perlu membuat mantra yang bisa digunakan berulang kali. Buat fungsi untuk serangan kombinasi!",
                    enemy: "üßô‚Äç‚ôÇÔ∏è",
                    concept: "Functions",
                    hint: "Buat fungsi attackCombo() yang berisi hero.attack() sebanyak 3 kali, lalu panggil fungsi tersebut",
                    expectedCode: ["function", "attackCombo", "attack"],
                    challenge: "Buat fungsi bernama attackCombo yang melakukan serangan 3 kali, lalu panggil fungsi tersebut",
                    solution: "function attackCombo() {\n    namaMu.attack()\n    namaMu.attack()\n    ZhengHe.attack()\n}\n\nattackCombo()"
                },
                {
                    title: "Quest 5: Boss Fight - Kombinasi Semua Konsep",
                    description: "Boss akhir muncul! Gunakan semua yang telah kamu pelajari: urutan, loop, kondisi, dan fungsi!",
                    enemy: "üëæ",
                    concept: "Combined Concepts",
                    hint: "Buat strategi: cek health, gunakan loop untuk menyerang, dan fungsi untuk healing",
                    expectedCode: ["function", "if", "for", "attack"],
                    challenge: "Buat strategi lengkap:\n1. Fungsi heal()\n2. Loop untuk menyerang 5 kali\n3. Kondisi: jika health < 50, gunakan heal()",
                    solution: "function heal() {\n    namaMu.usePotion()\n}\n\nfor (let i = 0; i < 5; i++) {\n    if (namaMu.getHealth() < 50) {\n        heal()\n    }\n    namaMu.attack()\n}"
                }
            ]
        };

        function initGame() {
            if (!gameState.playerName) {
                showNameInput();
            } else {
                loadQuest(gameState.currentQuest);
            }
        }

        function showNameInput() {
            const screen = document.getElementById('gameScreen');
            screen.innerHTML = `
                <div style="text-align: center; padding: 50px;">
                    <div class="character-sprite">üßô‚Äç‚ôÇÔ∏è</div>
                    <h2 style="color: #4ecdc4; margin: 30px 0;">Selamat Datang di Stage 2!</h2>
                    <p style="font-size: 1.2em; margin: 20px 0;">
                        Sebelum memulai memasuki dungeon, tulis nama heroMu!
                    </p>
                    <div style="margin: 30px auto; max-width: 400px;">
                        <input 
                            type="text" 
                            id="nameInput" 
                            placeholder="Masukkan nama kamu..."
                            style="width: 100%; padding: 15px; font-size: 1.1em; border-radius: 10px; border: 2px solid #4ecdc4; background: rgba(0,0,0,0.3); color: #fff; font-family: 'Courier New', monospace; text-align: center;"
                            maxlength="20"
                        >
                    </div>
                    <button class="button" onclick="startGame()" style="font-size: 1.2em;">
                        üöÄ Mulai Petualangan!
                    </button>
                </div>
            `;
            
            document.getElementById('nameInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startGame();
                }
            });
        }

        function startGame() {
            const nameInput = document.getElementById('nameInput').value.trim();
            
            if (!nameInput) {
                alert('‚ö†Ô∏è Nama tidak boleh kosong!');
                return;
            }
            
            gameState.playerName = nameInput;
            document.querySelector('.game-header h1').textContent = `üéÆ ${gameState.playerName}'s Coding Quest üéÆ`;
            loadQuest(gameState.currentQuest);
        }

        function loadQuest(questIndex) {
            const quest = gameState.questData[questIndex];
            const screen = document.getElementById('gameScreen');
            
            screen.innerHTML = `
                <div class="quest-title">${quest.title}</div>
                
                <div class="character-sprite">üßô‚Äç‚ôÇÔ∏è VS ${quest.enemy}</div>
                
                <div class="quest-description">
                    <strong>üìñ Cerita:</strong><br>
                    ${quest.description}
                    <br><br>
                    <strong>üí° Konsep: ${quest.concept}</strong>
                </div>

                <div class="hint-box">
                    <div class="hint-title">üí≠ Hint:</div>
                    ${quest.hint}
                    <br><br>
                    <strong>üéØ Tantangan:</strong><br>
                    ${quest.challenge}
                </div>

                <div class="solution-box" id="solutionBox">
                    <div class="solution-warning">üîí Solusi tidak dapat di-copy. Ketik manual untuk belajar!</div>
                    <div class="hint-title" style="color: #ffc107;">üí° Contoh Solusi:</div>
                    <div class="solution-code" id="solutionCode">${quest.solution}</div>
                </div>

                <div class="code-editor">
                    <strong style="color: #4ecdc4;">‚úçÔ∏è Editor Kode:</strong>
                    <textarea id="codeInput" placeholder="// Tulis kode kamu di sini..."></textarea>
                </div>

                <div style="text-align: center;">
                    <button class="button" onclick="runCode()">‚ñ∂Ô∏è Jalankan Kode</button>
                    <button class="button button-danger" onclick="toggleSolution()">üí° Lihat Solusi</button>
                </div>

                <div class="output-console" id="output">
                    <div class="output-line" style="color: #888;">Console Output (hasil akan muncul di sini...)</div>
                </div>
            `;

            updateStats();
        }

        function toggleSolution() {
            const solutionBox = document.getElementById('solutionBox');
            
            if (solutionBox.style.display === 'none' || solutionBox.style.display === '') {
                solutionBox.style.display = 'block';
                solutionBox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            } else {
                solutionBox.style.display = 'none';
            }
        }

        function runCode() {
            const code = document.getElementById('codeInput').value;
            const quest = gameState.questData[gameState.currentQuest];
            const output = document.getElementById('output');
            
            output.innerHTML = '';
            
            let success = true;
            let messages = [];

            quest.expectedCode.forEach(keyword => {
                if (code.includes(keyword)) {
                    messages.push(`<div class="output-line output-success">‚úì Ditemukan: ${keyword}</div>`);
                } else {
                    messages.push(`<div class="output-line output-error">‚úó Tidak ditemukan: ${keyword}</div>`);
                    success = false;
                }
            });

            output.innerHTML = messages.join('');

            if (success) {
                setTimeout(() => {
                    output.innerHTML += `<div class="output-line output-success">
                        <br>üéâ BERHASIL! Kode kamu benar!<br>
                        ‚öîÔ∏è Musuh dikalahkan!<br>
                        ‚ú® +100 XP
                    </div>`;
                    
                    gameState.codes.push({
                        quest: gameState.currentQuest + 1,
                        title: quest.title,
                        concept: quest.concept,
                        code: code
                    });

                    gameState.xp += 100;
                    gameState.level = Math.floor(gameState.xp / 300) + 1;

                    setTimeout(() => {
                        nextQuest();
                    }, 2000);
                }, 500);
            } else {
                output.innerHTML += `<div class="output-line output-error">
                    <br>‚ùå Belum lengkap! Periksa kembali kode kamu.
                </div>`;
            }
        }

        function nextQuest() {
            gameState.currentQuest++;
            
            if (gameState.currentQuest >= gameState.questData.length) {
                showVictory();
            } else {
                loadQuest(gameState.currentQuest);
            }
        }

        function showVictory() {
            const screen = document.getElementById('gameScreen');
            
            screen.innerHTML = `
                <div class="victory-screen">
                    <h2>üèÜ SELAMAT ${gameState.playerName.toUpperCase()}! üèÜ</h2>
                    <div class="character-sprite">üßô‚Äç‚ôÇÔ∏è‚ú®</div>
                    <p style="font-size: 1.5em; margin: 20px 0;">
                        Kamu telah menyelesaikan semua quest!
                    </p>
                    <p style="font-size: 1.2em;">
                        Total XP: ${gameState.xp}<br>
                        Level Akhir: ${gameState.level}<br>
                        Quest Selesai: ${gameState.questData.length}/5
                    </p>
                    <button class="button" onclick="showSummary()" style="font-size: 1.3em; margin-top: 30px;">
                        üìú Lihat Koleksi Kode
                    </button>
                    <button class="button button-danger" onclick="resetGame()" style="font-size: 1.3em;">
                        üîÑ Main Lagi
                    </button>
                </div>
            `;
            
            updateStats();
        }

        function showSummary() {
            const modal = document.getElementById('summaryModal');
            const collection = document.getElementById('codeCollection');
            
            let html = `<div class="code-collection">
                <p style="text-align: center; color: #4ecdc4; font-size: 1.2em; margin-bottom: 20px;">
                    üìö Koleksi Kode ${gameState.playerName}
                </p>`;
            
            gameState.codes.forEach((item, index) => {
                html += `
                    <div class="code-item">
                        <strong style="color: #4ecdc4;">Quest ${item.quest}: ${item.concept}</strong>
                        <p style="margin: 10px 0; color: #888;">${item.title}</p>
                        <pre style="background: #0a0a0a; padding: 10px; border-radius: 5px; overflow-x: auto;"><code>${item.code}</code></pre>
                    </div>
                `;
            });
            
            html += '</div>';
            collection.innerHTML = html;
            modal.style.display = 'flex';
        }

        function closeSummary() {
            document.getElementById('summaryModal').style.display = 'none';
        }

        function resetGame() {
            if (confirm('Yakin ingin memulai dari awal?')) {
                gameState.currentQuest = 0;
                gameState.xp = 0;
                gameState.level = 1;
                gameState.codes = [];
                gameState.playerName = '';
                document.querySelector('.game-header h1').textContent = 'üéÆ RPG CODING QUEST üéÆ';
                initGame();
            }
        }

        function updateStats() {
            document.getElementById('currentQuest').textContent = `${gameState.currentQuest + 1}/5`;
            document.getElementById('xpValue').textContent = gameState.xp;
            document.getElementById('levelValue').textContent = gameState.level;
            
            const progress = ((gameState.currentQuest) / gameState.questData.length) * 100;
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = progress + '%';
            progressBar.textContent = Math.round(progress) + '%';
        }

        initGame();
    </script>
</body>
</html>
